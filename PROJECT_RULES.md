## 兴趣班平台（马术/高尔夫）项目规则

本文件规范本项目在产品设计、交互视觉、工程开发、测试与交付方面的统一规则，适用于面向家长、教练、学生的兴趣班平台系统。

---

## 1. 产品目标与受众

- **定位**: 提供马术与高尔夫兴趣班的浏览、预约、支付与学习管理。
- **受众**: 家长（为子女预约与支付）、教练（开班与管理学员）、学生（查看课程、作业与出勤）。
- **核心价值**: 简洁、高效、可信的课程信息与预约体验。

---

## 2. 设计与交互总原则

- **简洁优先**: 页面信息架构不超过 3 层，避免多余选项与装饰性元素。
- **图文并茂**: 关键信息（课程、教练、场地）必须提供清晰图片与关键说明文字；卡片化呈现。
- **一致性**: 统一组件样式、间距、圆角、阴影与状态反馈。
- **易用性**: 行动点突出（预约/支付/联系客服），主按钮每页不超过 1 个主 CTA。
- **响应式**: 首先保证移动端体验，其次适配平板与桌面端。
- **可达性**: 文本对比度满足 WCAG AA；图片提供替代文本；键盘可操作。

---

## 3. 关键页面与信息规范

### 3.1 课程列表页
- 卡片字段（上限 8 项）：封面图、课程名、适龄段、难度、上课时间（下一班期）、地点（城市/场地）、价格/起、可报名状态。
- 支持按城市、年龄段、难度、时间筛选；搜索框支持课程名/教练名。

### 3.2 课程详情页
- 顺序：封面图 → 核心信息（名/时间/地点/价格/名额）→ 教练信息 → 课程简介 → 家长须知 → 评价。
- CTA 固定：主按钮“立即预约/报名”，次按钮“咨询/联系客服”。

### 3.3 教练主页
- 展示头像、资质徽章、授课年限、擅长人群、过往课程评分与学员数。

### 3.4 个人中心
- 家长：孩子档案、已报名/已完成课程、待付款、发票/报销、消息。
- 学生：我的课程、作业/课后任务、成绩/勋章。
- 教练：开班管理、学员名单、出勤打卡、成绩记录、课后反馈模板。

---

## 4. 组件与交互规范

- **导航**: 底部 3–5 项主导航；避免二级菜单深度超过 1 层。
- **卡片**: 封面图 16:9；标题最多两行省略；关键信息使用图标+文字。
- **按钮**: 主按钮使用品牌主色；禁用与加载态显著区分；点击 100–150ms 内反馈。
- **表单**: 字段不超过 6 个/屏；逐步引导；错误提示贴近字段并给出修正建议。
- **图片/视频**: 懒加载；占位骨架；失败回退到默认封面。
- **空状态**: 提供引导 CTA（去浏览课程/去开班）。
- **错误处理**: 人类可读错误文案；支付/预约失败提供重试与联系客服。
- **加载**: 首屏骨架；异步操作显示进度/成功/失败 toast。

---

## 5. 视觉与品牌（示例，可结合品牌指南细化）

- **颜色**: 以自然、运动、安全感为主基调；保证 4.5:1 对比度。
- **排版**: 标题/正文/辅助三级层级；行高 ≥ 1.4；中文优先宋黑体搭配。
- **图标**: 使用统一图标库；尺寸与线宽统一；含可读的标签。

---

## 6. 国际化与本地化

- 文案集中管理，避免硬编码；支持中英文切换。
- 时间/货币/度量单位本地化（时区、NZD、英制/公制按地区）。

---

## 7. 角色与权限

- 家长：为子女创建/管理档案、预约/支付、查看进度与发票。
- 学生：查看课程与任务、查看出勤与成绩。
- 教练：创建/管理课程、查看学员、记录出勤与成绩、发布任务与反馈。
- 权限最小化：仅访问自身或被授权数据；后台审计重要操作。

---

## 8. 性能与质量要求

- 首屏可交互（TTI）目标 < 3s（4G 网络与中端机型基准）。
- 图片按断点裁切与 WebP/AVIF，最大宽度不超过视口 1.5 倍。
- 代码分割：路由级分包 + 组件级懒加载。
- 监控：核心 Web 指标（FCP/LCP/CLS/INP）埋点与异常上报。

---

## 9. 可访问性与隐私合规

- 满足 WCAG 2.1 AA 关键要求；键盘与读屏可用。
- 处理未成年人数据需征得监护人同意；显示隐私政策与家长须知。
- 图片与学员头像需授权；禁止展示可识别未成年人的敏感信息。

---

## 10. 工程规范（Next.js/TypeScript 参考）

- **语言**: TypeScript 必选；禁止使用 any 逃逸（必要时加类型收窄）。
- **目录**: 遵循约定式路由；`app/` 或 `pages/` 保持清晰结构；公共组件放 `components/`。
- **代码风格**: 使用 ESLint + Prettier；提交前本地自动修复可修复问题。
- **状态管理**: 优先使用 React 服务器组件/本地状态；全局状态谨慎引入（仅跨页共享必要信息）。
- **接口**: 统一通过 API 模块请求；错误码与异常整合处理；请求与响应均需类型定义。
- **安全**: 输入校验、防 XSS/CSRF、鉴权与授权中间件；敏感信息不入前端仓库。

---

## 11. 测试规范（提交 GitHub 前必须全部通过）

- **层级**:
  - 单元测试：组件/工具函数，覆盖率阈值建议 ≥ 80%。
  - 集成测试：核心流程（搜索→查看详情→预约→支付）。
  - 端到端（E2E）：关键用户路径（家长、教练、学生各 1 条主路径）。
- **提交前本地校验**（至少包含以下脚本之一，名称可与项目一致）：
  - `test`：运行全部测试套件
  - `lint`：静态检查
  - `type-check`：类型检查
  - `build`：可构建且无严重警告
- 所有脚本需在提交前或推送前通过（建议使用 Git 钩子/CI 进行约束）。

---

## 12. Git 工作流与提交规范

- **分支策略**: `main`（稳定）、`develop`（集成）、`feat/*`、`fix/*`、`chore/*`。
- **提交消息**: 遵循 Conventional Commits，例如：
  - `feat(booking): 支持家长为多个孩子预约`  
  - `fix(payment): 修复重复支付风控误报`
- **合并策略**: 默认通过 Pull Request 合并，要求至少 1 名 reviewer 通过。
- **PR 模板要点**:
  - 变更范围与影响面
  - 截图/录屏（移动端优先）
  - 测试说明与通过截图/报告
  - 回滚方案

---

## 13. 发布与版本管理

- 使用语义化版本：`MAJOR.MINOR.PATCH`。
- 重要发布需更新 `CHANGELOG.md`，记录新增、修复、破坏性变更。
- 需要数据迁移的版本须提供向前与向后兼容方案或回滚脚本。

---

## 14. 文档要求

- 代码处关键模块需简短注释说明“为什么这么做”。
- 每个新特性需要在 `README` 或相应文档补充使用说明与限制。
- 面向运营/客服提供 FAQ 与故障自助排查指引。

---

## 15. 领域细则（马术/高尔夫）

- 课程难度与年龄段映射清晰，避免模糊表述。
- 场地与天气因素影响需在预约/开课状态中明确告知与变更策略。
- 安全须知与装备清单在课程详情中固定位置呈现。
- 课程评价需防刷与异常检测；优先突出“有用”评价。

---

## 16. 变更流程

- 规则文件由产品、设计、研发共同维护；重大调整需在评审会上确认。
- 任何规则变更需附带示例与影响面评估，并在 PR 中说明。

---

## 附录 A：PR 自检清单（提交前逐项确认）

- [ ] 设计符合“简洁、图文并茂”，移动端首屏清晰可用
- [ ] 关键路径（浏览→详情→预约/支付）E2E 通过
- [ ] 单元/集成测试与类型检查全部通过
- [ ] Lint 无错误，构建通过且无严重警告
- [ ] 无硬编码文案，国际化覆盖新增文案
- [ ] 图片与资源按规范优化，懒加载与占位完善
- [ ] 可访问性检查通过（对比度/替代文本/键盘操作）
- [ ] 隐私与未成年人数据处理合规
- [ ] 提交信息与 PR 模板填写完整，含截图/录屏与回滚方案

---

## 附录 B：设计自检清单

- [ ] 卡片字段不超过 8 项，关键信息一目了然
- [ ] 主 CTA 明确唯一，按钮状态可见
- [ ] 空、错、加载状态具备并文案清晰
- [ ] 列表/详情信息层级不超过 3 层
- [ ] 视觉对比度与字号满足可读性


